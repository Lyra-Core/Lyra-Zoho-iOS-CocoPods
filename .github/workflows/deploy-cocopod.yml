name: CI
on:
    push:
        tags:
            - "*"
        paths-ignore:
            - .github/**

jobs:
    build:
        runs-on: macOS-latest
        steps:
            - uses: actions/checkout@v1

            - name: Validate Pod
              run: |
                  pod lib lint --allow-warnings
                  pod spec lint --allow-warnings

            - name: Publish to CocoaPod register
              env:
                  COCOAPODS_TRUNK_TOKEN: ${{ secrets.COCOAPODS_TRUNK_TOKEN }}
              run: |
                  pod trunk push LyraZoho.podspec
